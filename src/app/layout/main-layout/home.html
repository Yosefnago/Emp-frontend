<div class="dashboard-wrapper">
  <!-- Sidebar Navigation -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
    <!-- Toggle Button on Border -->
    <button class="toggle-border-btn" (click)="toggleSidebar()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        @if (!isSidebarCollapsed) {
          <polyline points="9 18 15 12 9 6"></polyline>
        } @else {
          <polyline points="15 18 9 12 15 6"></polyline>
        }
      </svg>
    </button>

    <!-- Logo Section -->
    <div class="sidebar-header">
      <div class="logo-section">
        <div class="logo-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"></path>
          </svg>
        </div>
        @if (!isSidebarCollapsed) {
          <div class="logo-content">
            <h1 class="logo-title">HRM System</h1>
            <p class="logo-subtitle">ניהול משאבי אנוש</p>
          </div>
        }
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="sidebar-nav">
      <a class="nav-item" [class.active]="currentRoute === 'dashboard'" (click)="navigateTo('dashboard')" [attr.data-tooltip]="isSidebarCollapsed ? 'דף הבית' : null" title="דף הבית">
        <svg class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        @if (!isSidebarCollapsed) {
          <span class="nav-text">דף הבית</span>
        }
      </a>

      <a class="nav-item" [class.active]="currentRoute === 'employees'" (click)="navigateTo('employees')" [attr.data-tooltip]="isSidebarCollapsed ? 'ניהול עובדים' : null" title="ניהול עובדים">
        <svg class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        @if (!isSidebarCollapsed) {
          <span class="nav-text">ניהול עובדים</span>
        }
      </a>

      <a class="nav-item" [class.active]="currentRoute === 'departments'" (click)="navigateTo('departments')" [attr.data-tooltip]="isSidebarCollapsed ? 'מחלקות' : null" title="מחלקות">
        <svg class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        @if (!isSidebarCollapsed) {
          <span class="nav-text">מחלקות</span>
        }
      </a>

      <a class="nav-item" [class.active]="currentRoute === 'attendance'" (click)="navigateTo('attendance')" [attr.data-tooltip]="isSidebarCollapsed ? 'נוכחות' : null" title="נוכחות">
        <svg class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        @if (!isSidebarCollapsed) {
          <span class="nav-text">נוכחות</span>
        }
      </a>

      <a class="nav-item" [class.active]="currentRoute === 'salary'" (click)="navigateTo('salary')" [attr.data-tooltip]="isSidebarCollapsed ? 'שכר' : null" title="שכר">
        <svg class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
        </svg>
        @if (!isSidebarCollapsed) {
          <span class="nav-text">שכר</span>
        }
      </a>

      <a class="nav-item" [class.active]="currentRoute === 'events'" (click)="navigateTo('events')" [attr.data-tooltip]="isSidebarCollapsed ? 'אירועים' : null" title="אירועים">
        <svg class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2"></rect>
          <path d="M3 9h18"></path>
          <path d="M9 21V9"></path>
        </svg>
        @if (!isSidebarCollapsed) {
          <span class="nav-text">אירועים</span>
        }
      </a>

      <div class="nav-divider"></div>

      <a class="nav-item" [class.active]="currentRoute === 'settings'" (click)="navigateTo('settings')" [attr.data-tooltip]="isSidebarCollapsed ? 'הגדרות' : null" title="הגדרות">
        <svg class="nav-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v6m0 6v6m5.66-13.66l-4.24 4.24m-2.84 2.84l-4.24 4.24M23 12h-6m-6 0H1m18.36 5.64l-4.24-4.24m-2.84-2.84l-4.24-4.24"></path>
        </svg>
        @if (!isSidebarCollapsed) {
          <span class="nav-text">הגדרות</span>
        }
      </a>
    </nav>

    <!-- User Profile at Bottom -->
    <div class="sidebar-footer">
      <div class="user-profile">
        <div class="user-avatar">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </div>
        @if (!isSidebarCollapsed) {
          <div class="user-info">
            <span class="user-name">{{ username }}</span>
            <span class="user-role">מנהל מערכת</span>
          </div>
        }
        <button class="logout-icon-btn" (click)="onLogout()" title="התנתק">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
            <polyline points="16 17 21 12 16 7"></polyline>
            <line x1="21" y1="12" x2="9" y2="12"></line>
          </svg>
        </button>
      </div>
    </div>
  </aside>

  <!-- Main Content Area -->
  <main class="main-content" [class.expanded]="isSidebarCollapsed">
    <router-outlet></router-outlet>
  </main>
</div>