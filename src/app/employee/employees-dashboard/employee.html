<div class="buttons-container">
  <input
    type="search"
    class="search"
    placeholder="חיפוש"
    [(ngModel)]="searchTerm"
    (input)="applyFilter()"
  />
  <button class="add-employee-btn" routerLink="/dashboard/add">הוספת עובד</button>
</div>


<div class="content-wrapper">
 <div class="scrollable-content">
 
<div class="table-wrapper">
        <table mat-table [dataSource]="dataSource"> 

          <ng-container matColumnDef="fullName">
            <th mat-header-cell *matHeaderCellDef> שם עובד </th>
            <td mat-cell *matCellDef="let emp"> {{ `${emp.firstName} ${emp.lastName}` }} </td>
          </ng-container>

          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef class="center-text"> אימייל </th>
            <td mat-cell *matCellDef="let emp" class="center-text">
              <span class="badge">{{ emp.email }}</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="phone">
            <th mat-header-cell *matHeaderCellDef class="center-text"> פלאפון </th>
            <td mat-cell *matCellDef="let emp" class="center-text">
              <span class="badge">{{emp.phone}}</span>
            </td>
          </ng-container>

          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef> כתובת </th>
            <td mat-cell *matCellDef="let emp"> {{ emp.address || 'לא צוינה' }} </td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef class="center-text"> נוכחות </th>
            <td mat-cell *matCellDef="let emp" class="center-text">
              <span
                class="online-status"
                [ngClass]="emp.status ? 'online' : 'offline'"
              ></span>
            </td>
          </ng-container>

          <ng-container matColumnDef="department">
            <th mat-header-cell *matHeaderCellDef> מחלקה </th>
            <td mat-cell *matCellDef="let emp" class="badge"> {{emp.department}} </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> פעולות </th>
            <td mat-cell *matCellDef="let emp" class="actions-cell">
              
              <button
                class="action-btn"
                mat-icon-button
                (click)="$event.stopPropagation(); viewAttendance(emp.personalId)"
                aria-label="צפייה ביומן נוכחות"
                title="נוכחות"
              >
                <mat-icon>calendar_month</mat-icon>
              </button>
              
              <button
                class="action-btn"
                mat-icon-button
                (click)="$event.stopPropagation(); goToEmployeeDetails(emp.personalId)"
                aria-label="עריכת פרטי עובד"
                title="עריכה"
              >
                <mat-icon>edit</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

          <tr 
            mat-row 
            *matRowDef="let row; columns: displayedColumns;"
            (click)="selectEmployee(row)"
            (dblclick)="goToEmployeeDetails(row.personalId)"
            [class.selected-row]="selectedEmployee?.personalId === row.personalId"
          ></tr>
          
        </table>
         </div>
 </div>
</div>
